# TraitorTrack Environment Variables
# Copy this file to .env and configure with your actual values
# NEVER commit .env to version control!

# ==============================================================================
# REQUIRED: Critical Security Variables
# ==============================================================================

# Session Secret (REQUIRED)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SESSION_SECRET=your_session_secret_here_change_me_64_chars_minimum

# Admin Account (REQUIRED for first login)
# Set a strong password for the initial admin account
ADMIN_PASSWORD=your_strong_admin_password_here

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# Development Database (Replit workspace only)
DATABASE_URL=postgresql://user:password@host:5432/dev_database

# Production Database (AWS RDS or external PostgreSQL)
# PRODUCTION_DATABASE_URL=postgresql://user:password@host:5432/production_database

# ==============================================================================
# REDIS CONFIGURATION (Required for Multi-Worker Production)
# ==============================================================================

# Redis URL for sessions and rate limiting
# Format: redis://[[username]:[password]]@host:port/db
# CRITICAL for multi-worker production deployments
# Without Redis: Users randomly logged out, rate limits not enforced
# Examples:
#   - redis://localhost:6379/0 (local, no password)
#   - redis://:password@redis.example.com:6379/0 (with password)
#   - rediss://user:pass@redis.example.com:6380/0 (SSL/TLS)
REDIS_URL=redis://localhost:6379/0

# Alternative: Individual Redis connection parameters
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password

# ==============================================================================
# EMAIL SERVICE (SendGrid)
# ==============================================================================

# SendGrid API Key for email notifications
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=your_sendgrid_api_key_here

# Email addresses for SendGrid
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_ADMIN_EMAIL=admin@yourdomain.com

# ==============================================================================
# ENVIRONMENT DETECTION
# ==============================================================================

# Environment type (development, staging, production)
ENVIRONMENT=development

# Replit deployment flag (set to 1 for production deployments)
REPLIT_DEPLOYMENT=0

# ==============================================================================
# FILE UPLOAD LIMITS
# ==============================================================================

# Maximum file upload size in bytes (default: 16MB)
MAX_FILE_UPLOAD_SIZE=16777216

# ==============================================================================
# DATABASE CONNECTION POOL CONFIGURATION
# ==============================================================================

# Connection pool size per worker (default: 25)
POOL_SIZE=25

# Maximum overflow connections per worker (default: 15)
POOL_MAX_OVERFLOW=15

# ==============================================================================
# POOL MONITORING & ALERTS
# ==============================================================================

# Pool usage alert thresholds (as decimals)
POOL_WARNING_THRESHOLD=0.70     # 70% - Yellow alert
POOL_CRITICAL_THRESHOLD=0.85    # 85% - Orange alert
POOL_DANGER_THRESHOLD=0.95      # 95% - Red alert

# Pool monitoring check interval (seconds)
POOL_CHECK_INTERVAL=30

# Cooldown between alert emails (seconds, default: 5 minutes)
POOL_ALERT_COOLDOWN=300

# Enable email alerts for pool issues
POOL_EMAIL_ALERTS=true

# ==============================================================================
# SESSION TIMEOUT CONFIGURATION
# ==============================================================================

# Session absolute timeout (seconds, default: 3600 = 1 hour)
SESSION_ABSOLUTE_TIMEOUT=3600

# Session inactivity timeout (seconds, default: 1800 = 30 minutes)
SESSION_INACTIVITY_TIMEOUT=1800

# Session warning time before timeout (seconds, default: 300 = 5 minutes)
SESSION_WARNING_TIME=300

# ==============================================================================
# AUDIT LOG & GDPR COMPLIANCE
# ==============================================================================

# Enable PII anonymization in audit logs (GDPR compliance)
ANONYMIZE_AUDIT_LOGS=true

# Email anonymization method (mask, hash, domain_only)
EMAIL_ANONYMIZATION_METHOD=mask

# ==============================================================================
# PERFORMANCE MONITORING
# ==============================================================================

# Slow query logging threshold (milliseconds, default: 100)
SLOW_QUERY_THRESHOLD_MS=100

# Enable slow query logging
SLOW_QUERY_LOGGING_ENABLED=true

# ==============================================================================
# GRACEFUL SHUTDOWN
# ==============================================================================

# Graceful shutdown timeout (seconds, default: 30)
GRACEFUL_SHUTDOWN_TIMEOUT=30

# ==============================================================================
# TEST USER CREATION (Development/Staging Only)
# ==============================================================================

# Create test users on startup (DISABLE in production!)
CREATE_TEST_USERS=false

# Test user passwords (only used when CREATE_TEST_USERS=true)
BILLER_PASSWORD=test_biller_password
DISPATCHER_PASSWORD=test_dispatcher_password

# ==============================================================================
# OPTIONAL: Advanced Configuration
# ==============================================================================

# Enable pool monitoring
# POOL_MONITORING_ENABLED=true

# Enable verbose logging for debugging (DISABLE in production!)
# DEBUG_LOGGING=false

# Custom port for development server (default: 5000)
# PORT=5000
